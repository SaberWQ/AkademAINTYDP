{% extends "base.html" %}

{% block title %}
    –ù–¢–£ –î–ü - –ê–∫–∞–¥–µ–º—ñ—á–Ω–∞ –¥–æ–±—Ä–æ—á–µ—Å–Ω—ñ—Å—Ç—å
{% endblock %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('ai.static', filename = 'css/ai.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="header" onclick="openProfile()" >
        <a class="back-button" href="/">‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ—ó</a>
        {% if current_user.is_authenticated %}
            <div class="user-info" onclick="Logout()">
                <span>–ü—Ä–∏–≤—ñ—Ç, {{ current_user.username }}!</span>
                <a href="/logout" class="logout-button">üö™ –í–∏–π—Ç–∏</a>
            </div>
        {% endif %}
    </div>

    <div class="profile-section">
        <div class="profile-header">
            <div class="profile-avatar">üéì</div>
            <div class="profile-info">
                <h1>–®–Ü-–∞—Å–∏—Å—Ç–µ–Ω—Ç –ù–¢–£ "–î–ü"</h1>
                <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –∑ –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ</p>
                <div class="status">
                    <div class="status-dot"></div>
                    –û–Ω–ª–∞–π–Ω - –≥–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏
                </div>
            </div>
        </div>
    </div>

    {% if current_user.is_authenticated %}
    <div class="user-welcome">
        <p>üëã –í—ñ—Ç–∞—é, <strong>{{ current_user.username }}</strong>!</p>
        {% if current_user.group %}
        <p>–ì—Ä—É–ø–∞: {{ current_user.group }}</p>
        {% endif %}
        <p>–ì–æ—Ç–æ–≤–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∞–º –∑ –ø–∏—Ç–∞–Ω—å –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ üìö</p>
    </div>
    {% endif %}

    <div class="chat-container">
        <div class="chat-header">
            <h3>üí¨ –ß–∞—Ç –∑ –®–Ü-–∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º</h3>
            <div class="chat-actions">
                <button id="clearHistoryBtn" class="clear-btn" onclick="clearChatHistory()">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é
                </button>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <p>üëã <strong>–í—ñ—Ç–∞—é! –Ø - –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π –®–Ü-–∞—Å–∏—Å—Ç–µ–Ω—Ç –∑ –ø–∏—Ç–∞–Ω—å –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ –≤ –ù–¢–£ "–î–Ω—ñ–ø—Ä–æ–≤—Å—å–∫–∞ –ø–æ–ª—ñ—Ç–µ—Ö–Ω—ñ–∫–∞".</strong></p>
                <p style="margin-top: 15px;">–Ø –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –≤–∞–º –∑:</p>
                <ul style="margin: 10px 0; padding-left: 20px;">
                    <li>‚Ä¢ –ü–æ—è—Å–Ω–µ–Ω–Ω—è–º –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ –∞–∫–∞–¥–µ–º—ñ—á–Ω–æ—ó –¥–æ–±—Ä–æ—á–µ—Å–Ω–æ—Å—Ç—ñ</li>
                    <li>‚Ä¢ –ü—Ä–∞–≤–∏–ª–∞–º–∏ —Ü–∏—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω—å</li>
                    <li>‚Ä¢ –£–Ω–∏–∫–Ω–µ–Ω–Ω—è–º –ø–ª–∞–≥—ñ–∞—Ç—É</li>
                    <li>‚Ä¢ –ï—Ç–∏—á–Ω–∏–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏ –Ω–∞—É–∫–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏</li>
                    <li>‚Ä¢ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–æ—é –¥–æ –∫–≤—ñ–∑—É</li>
                </ul>
                <p style="margin-top: 15px;"><strong>–ó–∞–¥–∞–≤–∞–π—Ç–µ –±—É–¥—å-—è–∫—ñ –ø–∏—Ç–∞–Ω–Ω—è!</strong> üìö</p>
            </div>

            <div class="message assistant">
                <div class="message-content">
                    {% if current_user.is_authenticated %}
                        –í—ñ—Ç–∞—é, {{ current_user.username }}! üéâ –ì–æ—Ç–æ–≤–∏–π –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –≤—Å—ñ –≤–∞—à—ñ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –∞–∫–∞–¥–µ–º—ñ—á–Ω—É –¥–æ–±—Ä–æ—á–µ—Å–Ω—ñ—Å—Ç—å. –ó —á–æ–≥–æ –ø–æ—á–Ω–µ–º–æ?
                    {% else %}
                        –í—ñ—Ç–∞—é –≤–∞—Å —É —á–∞—Ç—ñ! üéâ –î–ª—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º, –±—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –¥–æ —Å–∏—Å—Ç–µ–º–∏.
                    {% endif %}
                </div>
            </div>

            <div class="quick-actions">
                {% for response in quick_responses %}
                <div class="quick-action" onclick="sendQuickMessage('{{ response.message }}')">
                    {{ response.icon }} {{ response.title.split(' ', 1)[1] }}
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-content">
                <div class="typing-dots">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
                <span>–®–Ü-–∞—Å–∏—Å—Ç–µ–Ω—Ç –¥—Ä—É–∫—É—î...</span>
            </div>
        </div>

        <div class="chat-input-container">
            {% if current_user.is_authenticated %}
            <div class="input-wrapper">
                <textarea class="chat-input" id="chatInput" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è..." rows="1"></textarea>
                <button class="send-button" id="sendButton" onclick="sendMessage()">
                    üì§
                </button>
            </div>
            {% else %}
            <div class="login-prompt" onclick="Autorization()" >
                <p>–î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –®–Ü-–∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ—Ç—Ä—ñ–±–Ω–æ —É–≤—ñ–π—Ç–∏ –¥–æ —Å–∏—Å—Ç–µ–º–∏</p>
                <a class="login-btn" href="/registration">üîê –£–≤—ñ–π—Ç–∏</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('ai.static', filename = 'js/ai.js') }}"></script>
{% endblock %}